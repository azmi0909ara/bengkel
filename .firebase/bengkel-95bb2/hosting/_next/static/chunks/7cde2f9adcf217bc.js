(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,14271,e=>{"use strict";var a=e.i(43476),r=e.i(71645);e.i(36180);var n=e.i(98925),t=e.i(59141);function l(){let[e,l]=(0,r.useState)([]),[d,s]=(0,r.useState)([]),[o,i]=(0,r.useState)(null),[c,p]=(0,r.useState)("Semua"),[g,u]=(0,r.useState)(""),[m,x]=(0,r.useState)({pelangganId:"",jenis:"Motor",merk:"",platNomor:"",tahun:""});(0,r.useEffect)(()=>{let e=async()=>{s((await (0,n.getDocs)((0,n.collection)(t.db,"kendaraan"))).docs.map(e=>({id:e.id,...e.data()})))};(async()=>{l((await (0,n.getDocs)((0,n.collection)(t.db,"pelanggan"))).docs.map(e=>({id:e.id,...e.data()})))})(),e()},[]);let h=async()=>{s((await (0,n.getDocs)((0,n.collection)(t.db,"kendaraan"))).docs.map(e=>({id:e.id,...e.data()})))},b=async a=>{a.preventDefault();let r=e.find(e=>e.id===m.pelangganId);r&&(o?(await (0,n.updateDoc)((0,n.doc)(t.db,"kendaraan",o),{...m,pelangganNama:r.nama,tahun:Number(m.tahun)}),i(null)):await (0,n.addDoc)((0,n.collection)(t.db,"kendaraan"),{...m,pelangganNama:r.nama,tahun:Number(m.tahun),createdAt:n.Timestamp.now()}),x({pelangganId:"",jenis:"Motor",merk:"",platNomor:"",tahun:""}),h())},y=async e=>{confirm("Hapus kendaraan ini?")&&(await (0,n.deleteDoc)((0,n.doc)(t.db,"kendaraan",e)),h())},j=d.filter(e=>{let a="Semua"===c||e.jenis===c,r=g.toLowerCase(),n=e.pelangganNama.toLowerCase().includes(r)||e.merk.toLowerCase().includes(r)||e.platNomor.toLowerCase().includes(r);return a&&n});return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black p-6 text-white",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Data Kendaraan"}),(0,a.jsxs)("form",{onSubmit:b,className:"bg-gray-900 border border-gray-700 rounded-xl p-6 mb-8 grid grid-cols-2 gap-4",children:[(0,a.jsxs)("select",{className:"bg-gray-800 border border-gray-700 rounded px-3 py-2",value:m.pelangganId,onChange:e=>x({...m,pelangganId:e.target.value}),required:!0,children:[(0,a.jsx)("option",{value:"",children:"Pilih Pelanggan"}),e.map(e=>(0,a.jsx)("option",{value:e.id,children:e.nama},e.id))]}),(0,a.jsxs)("select",{className:"bg-gray-800 border border-gray-700 rounded px-3 py-2",value:m.jenis,onChange:e=>x({...m,jenis:e.target.value}),children:[(0,a.jsx)("option",{children:"Motor"}),(0,a.jsx)("option",{children:"Mobil"})]}),(0,a.jsx)("input",{placeholder:"Merk",className:"bg-gray-800 border border-gray-700 rounded px-3 py-2",value:m.merk,onChange:e=>x({...m,merk:e.target.value}),required:!0}),(0,a.jsx)("input",{placeholder:"Plat Nomor",className:"bg-gray-800 border border-gray-700 rounded px-3 py-2",value:m.platNomor,onChange:e=>x({...m,platNomor:e.target.value}),required:!0}),(0,a.jsx)("input",{type:"number",placeholder:"Tahun",className:"bg-gray-800 border border-gray-700 rounded px-3 py-2",value:m.tahun,onChange:e=>x({...m,tahun:e.target.value}),required:!0}),(0,a.jsx)("button",{className:"col-span-2 bg-red-600 hover:bg-red-700 transition rounded py-2 font-semibold",children:o?"Update Kendaraan":"Tambah Kendaraan"})]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[(0,a.jsx)("input",{placeholder:"Cari pelanggan / merk / plat...",className:"flex-1 bg-gray-800 border border-gray-700 rounded px-4 py-2",value:g,onChange:e=>u(e.target.value)}),(0,a.jsxs)("select",{className:"bg-gray-800 border border-gray-700 rounded px-4 py-2",value:c,onChange:e=>p(e.target.value),children:[(0,a.jsx)("option",{children:"Semua"}),(0,a.jsx)("option",{children:"Motor"}),(0,a.jsx)("option",{children:"Mobil"})]})]}),(0,a.jsx)("div",{className:"bg-gray-900 border border-gray-700 rounded-xl overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,a.jsx)("thead",{className:"bg-gray-800 text-gray-300 uppercase text-xs",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3",children:"Pelanggan"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"Jenis"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"Merk"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"Plat"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"Tahun"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center",children:"Aksi"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-700",children:0===j.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-4 py-6 text-center text-gray-500",children:"Data kendaraan tidak ditemukan"})}):j.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-800 transition",children:[(0,a.jsx)("td",{className:"px-4 py-3 font-medium",children:e.pelangganNama}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.jenis}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.merk}),(0,a.jsx)("td",{className:"px-4 py-3 tracking-wider",children:e.platNomor}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.tahun}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"flex justify-center gap-3",children:[(0,a.jsx)("button",{onClick:()=>{i(e.id),x({pelangganId:e.pelangganId,jenis:e.jenis,merk:e.merk,platNomor:e.platNomor,tahun:e.tahun.toString()})},className:"px-3 py-1 rounded bg-yellow-500/10 text-yellow-400 hover:bg-yellow-500/20",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>y(e.id),className:"px-3 py-1 rounded bg-red-500/10 text-red-400 hover:bg-red-500/20",children:"Hapus"})]})})]},e.id))})]})})})]})}e.s(["default",()=>l])}]);